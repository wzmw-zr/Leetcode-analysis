# LeetCode343 整数拆分 题解

## 一、题目描述

给定一个正整数 *n*，将其拆分为**至少**两个正整数的和，并使这些整数的乘积最大化。 返回你可以获得的最大乘积。



## 二、分析

### 1. DFS

求每个数字的最大拆分乘积：
$$
a[n]=\max(n,\max_{i=1}^{n-1}(\max(i, a[i])\times \max(n-i, a[n-i])))
$$

### 2.  DP

状态转移方程如上，**关键点在于：一个数字可以选择不拆分而直接使用本身**。



### 3. 数学

根据数学规律：
$$
a[n]\ge 2\times a[n-2]\ge 2\times(2\times a[n-4])=4\times a[n-4]
$$
这意味着，我们只需要考虑$j=2,3$的情况。

**函数极值证明法**：

定义函数$f(x)$表示将给定的正整数拆分成尽可能多的正数x的情况下的最大乘积，即可以将n分成$\frac{n}{x}$项，此时$f(x)=x^{\frac{n}{x}}$，目标是求$f(x)$的最大值，即:
$$
\max_x(f(x))
$$
可以将$f(x)$写成如下形式：
$$
f(x)=x^{\frac{n}{x}}=e^{\frac{n\ln x}{x}}
$$
显然，函数的单调性只与$h(x)=\frac{\ln x}{x}$有关，计算其驻点，得$x=e$，因为$e$在2, 3之间，所以计算一下2, 3对应的情况就行，而:
$$
\frac{f(3)}{f(2)}=\frac{e^{n.h(3)}}{e^{n.h(2)}}=e^{n.(\frac{\ln3}{3}-\frac{ln2}{2})}=e^{\frac{n}{6}(2\ln3-3\ln2)}=e^{\frac{n}{6}(\ln9-\ln8)}
$$
因此，需要将整数拆分成尽可能多的3, 下面根据n除以3的余数进行分类讨论：

+ 余数为0, $n=3m(m\ge2)$，将n拆分成m个3。
+ 余数为1, $n=3m+1(m\ge1)$，由于$2\times2\gt 3\times1$，因此将n拆分成$m-1$个3和2个2。
+ 如果余数为2, $n=3m+2(m\ge1)$，则将n拆分成$m$个3和一个2。



## 三、代码

### 1. DP

```c++
int integerBreak(int n) {
    int dp[n + 1];
    memset(dp, 0, sizeof(dp));
    dp[1] = dp[2] = 1;
    for (int i = 3; i <= n; i++) {
        for (int j = 1; j < i; j++) {
            dp[i] = max(dp[i], max(j, dp[j]) * max(i - j, dp[i - j]));
        }
    }
    return dp[n];
}
```

